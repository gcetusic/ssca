<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    
    <title>Join/Renew</title>   

    <link href="/static/bootstrap_toolkit/css/bootstrap.css" rel="stylesheet"> 
    <link href="/static/bootstrap_toolkit/css/docs.css" rel="stylesheet"> 
    <link href="/static/bootstrap_toolkit/css/datepicker.css" rel="stylesheet"> 
	
    <!-- 
        java script for modal
        needs jquery 1.8.1 
    -->
    <script src="/static/bootstrap_toolkit/js/jquery.js"></script>
    <script src="/static/bootstrap_toolkit/js/bootstrap-transition.js"></script>
    <script src="/static/bootstrap_toolkit/js/bootstrap-modal.js"></script>
    <script src="/static/bootstrap_toolkit/js/bootstrap-datepicker.js"></script>
    <script src="/static/admin/js/creditcard.js"></script>

    <script>		
        /* datepicker launcher */
        $(function(){		
            $('#dp3').datepicker();
        });

        function bulletinClicked() {
            var cbFirstClass = document.getElementById('cbFirstClass');
            var cbBulletins = document.getElementById('cbBulletins');
            cbFirstClass.checked = cbBulletins.checked;
            updateTotal();
        }

        function updateTotal() {		

            var total = {{ basic_mail_cost }};
            var bulletinVal = parseInt($('#id_mail_location').val());
            var cbFirstClass = document.getElementById('cbFirstClass');
            var cbBulletins = document.getElementById('cbBulletins');

            $('#mail_cost_label').text(bulletinVal);

            if (cbBulletins.checked){
                total += bulletinVal;
            }
            if (cbFirstClass.checked){
                total += 5;
            }

            $('#total').text(total);
        }


        function updateSSCAPurchase(){
            var valueSelected = $('#id_burgee_type').val();
            var textSelected = $('#id_burgee_type option:selected').text();
            $('#purchase').text(valueSelected);
            $('#burgeeCostBottom').text(valueSelected);
            $('#burgeeSize').text(textSelected);
        }

        function setTotalCostForBurgeeOnUnSelect(){
            var valueSelected = $('#id_burgee_type').val();
            var total = 80;
            $('#costTotal').text(total);
        }

        function setTotalCostForBurgee(){	    
            var valueSelected = $('#id_burgee_type').val();
            var total = parseInt(valueSelected, 10)+65;
            $('#costTotal').text(total);
        }

        function verifyCreditCard(){		  
            var creditCardNum  = document.getElementById('id_card_number').value; 
            var creditCardtype = document.getElementById('id_card_type').value;
            if (checkCreditCard(creditCardNum,creditCardtype)) {
                return validateForm();
            } 
            else {alert (ccErrors[ccErrorNo])};
        } 
    </script>
  </head>

  <body>
      <!-- Step 1 dialog begins -->
         <div id="modalStep1" class="modal hide fade">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h3>Join SSCA</h3>
            </div>
            <div class="modal-body">
              <h4>Subscribe to SSCA (Step 1 to 3)</h4>
              <p>If you were a subscriber in the past and would like to renew, <a href = "">click here</a></p>
              <br>
		  <p>Joining SSCA is quick and easy. You'll be logged in within 5 minutes.</p>
		  <p>First, we need some basic information from you.</p>
            </div>
			
			
	   <form class="bs-docs-example form-horizontal" >
            <div class="control-group">
              <label class="control-label" for="firstname" >First name: </label>
              <div class="controls">
                {{ form.firstname }}
              </div>
            </div>
            <div class="control-group">
              <label class="control-label" for="lastname">Last name: </label>
              <div class="controls">
                {{ form.lastname }}
              </div>
            </div>
			
            <div class="control-group">
              <label class="control-label" for="email">Email Address: </label>
              <div class="controls">
                {{ form.email }}
              </div>
            </div>
          </form>

           <div class="modal-footer">
               <a data-toggle="modal"  href="#modalStep2" data-dismiss="modal" class="btn btn-primary" >Continue to Step 2</a>
            </div>
        </div>
         <div class="bs-docs-example" >
            <a data-toggle="modal" href="#modalStep1" class="btn btn-primary btn-large">JOIN/RENEW</a>
         </div>	  
      <!-- Step 1 dialog ends -->

      <!-- Step 2 dialog begins -->
      <div id="modalStep2" class="modal hide fade">
          <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h3>Join SSCA</h3>
          </div>
          <div class="modal-body">
              <h4>Subscribe to SSCA (Step 2 to 3)</h4>
              <p>SSCA publishes the monthly commodore's bulletin, which keeps you upto date on the latest cruising news and happenings.</p>
              <br>
              <p>You may chosse to have a paper copy delivered to you.</p>
              <br>
              <p>Membership fee: ${{ basic_mail_cost }} / year</p>
              <div class="control-group">
                  <form id="myform">
                      <div class="controls" style="float:left;">
                          <label class="checkbox">
                              <input type="checkbox" name="checkall" id="cbBulletins" onclick="bulletinClicked();"> Main bulletins to me &nbsp;&nbsp;&nbsp;
                          </label>
                      </div>

                      <div>
                          <table><tr>
                                  <td> {{ form.mail_location }} </td>
                                  <td>(Add $<font id="mail_cost_label">5</font>)</td>
                              </tr>
                          </table>
                      </div>
                      <div style="float:clear;">
                      </div>
                      <div class="control-group">
                          <div class="controls">
                              <label class="checkbox">
                                  <input type="checkbox" id="cbFirstClass" onclick="updateTotal();"> Send via First Class Mail (Add $5) 
                              </label>
                          </div>
                      </div>
                  </form>
              </div>
          </div>

          <hr>
          <table width="100%">
              <tr>
                  <td style="padding-left: 24px;padding-bottom: 24px;"> My Total: $<font id="total">{{ basic_mail_cost }} </font>/ year </td>			  
                  <td align="right" style="padding-right: 24px;padding-bottom: 24px;">
                      <a data-toggle="modal" href="#modalStep3" data-dismiss="modal" class="btn btn-primary">Continue to Step 3</a>
                  </td>
              </tr>
          </table>

      </div>
      <!-- Step 2 dialog ends -->

      <!-- Step 3 dialog begins -->
      <div id="modalStep3" class="modal hide fade">
          <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h3>Join SSCA</h3>
          </div>
          <div class="modal-body">
              <h4>Subscribe to SSCA (Step 3 to 3)</h4>
              <p>Almost done. Decide whether you'd like to fly the SSCA burgee, <br>and provide your payment details to checkout.</p>
              <form name="firstForm">
                  <div class="control-group">
                      <div class="controls" style="float:left;">
                          <label class="checkbox">
                              <input type="checkbox" name="chkPurchaseSSCABurgee"> Purchase SSCA Burgee &nbsp;&nbsp;&nbsp;
                          </label>
                      </div>
                  </div>
                  <div>
                      <table><tr>
                              <td> {{ form.burgee_type }} </td>
                              <td>(Add $<font id="purchase">25</font>)</td>
                          </tr>
                      </table>
                  </div>
                  <div style="float:clear;">
                  </div>

                  <div class="control-group">

                      <div class="controls" style="float:left;" >
                          <label class="control-label" for="inputEmail">Name on card: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
                      </div>
                      <div class="controls">
                          {{ form.name_on_card }}
                      </div>

                      <div class="controls" style="float:clear;">
                      </div>
                      <div class="controls" style="float:left;">
                          <label class="control-label" for="inputEmail">Credit card type:</label> 
                      </div>

                      <div>
                          {{ form.card_type }}
                      </div>
                      <div style="float:clear;">
                      </div>
                      <div class="controls" style="float:left;">
                          <label class="control-label" for="inputEmail" >Credit card number: &nbsp;&nbsp;</label>
                      </div>
                      <div class="controls">
                          {{ form.card_number }}
                      </div>
                      <div style="float:clear;">
                      </div>
                  </form>
                  <form class="form-inline" name="secondForm">
                      <label class="control-label" for="inputEmail">Expiry date: &nbsp;&nbsp;</label>
                      <div class="input-append date" id="dp3" data-date="12-02-2012" data-date-format="dd-mm-yyyy">
                          <input class="span2" size="16" type="text" value="" readonly="" name="date">
                          <span class="add-on"><img src="/static/images/calendar.png" alt="calendar" class="icon-calendar" data-date-format="yyyy-mm-dd" data-date="2012-02-20"></span>
                      </div>

                      <label class="control-label" for="inputEmail">CSV: &nbsp;&nbsp;</label>
                          {{ form.card_csv }}
                  </form>
              </div>
              <div class="control-group">
                  <div class="controls" style="float:left;">
                      <p>my total:$65 / year &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
                  </div>
                  <form name="thirdForm">
                      <div>
                          <label class="checkbox">
                              <input type="checkbox" name="chkRenewEveryYear" onclick="setTotalCostForBurgee();"> Automatically renew every year 
                          </label>
                      </div>
                      <div style="float:clear;">
                      </div>
                  </form>
                  <div>
						$<font id="burgeeCostBottom">25 </font>
						<font id="burgeeSize">Large (18" x 24")</font>
				</div>
              </div>
          </div>

          <hr>
          <table width="100%">
              <tr>
                  <td style="padding-left: 24px; padding-bottom: 24px;"> $80 </td>			  
                  <td align="right" style="padding-right: 24px;padding-bottom: 24px;">
                      <button class="btn btn-primary" onclick="verifyCreditCard();">Pay and Login</button>
                  </td>
              </tr>
          </table>          
      </div>
      <!-- Step 3 dialog ends -->
 </body>
</html>
